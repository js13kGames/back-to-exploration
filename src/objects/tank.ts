import { XYPosition } from "./xyposition";
import { Shit } from "./shit";

export class Tank {
  private img: HTMLImageElement;
  protected shit: Shit;
  private pos: XYPosition;
  private basePos: XYPosition;
  private vx = 0;
  private moving = 0;
  private cur = 1;
  private base64 = 'data:image/png;base64,';
  private imgs = [
    '',
    `iVBORw0KGgoAAAANSUhEUgAAACAAAAA7CAYAAAAaa4isAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPJSURBVFiFxZhbiE9BHMc/ay02111l3e921ypWJNoSJRJPXoQ8yOUJSUq8SYnkkpKiEEUohXjw4pJbIuLBPXdWWNvarNvu8TDn7H/O/OfMmTnn///71uk/5ze/y/c/M+c3vxlIh+XAY6AZ+AG8ABak9GmNPsBfwFOeeqDI1kmHFASqgGKNvALoWQgCvQx9PQpBoMnQ17UQBBoMfZ0KQeAt0Po/CTQCuyL6Smyd6FaxC24AnYHhQDdJ/h64nNK3E44RzgUtQG2hgpcjpkNNSM8xf6o5w35N8OA5ne/g1UCbgYAHzMwngd0xwT3gUj4JPLYg4AGT8hG8E/HDHzwn80GgwjK4h8iY/XRO0mTCUgfdDsCMXBPoFq8SwqIUsbRYjN3QB+02oCZXwUuBhzHBHyEy4TlJdjhXBA7GBPcQOQJgIPDbl/1GWYxJ1sACYImFXov/+w646LdLEFOXmEB3YIelbhepfUpqz3GMGcJWMkO8EzhC9BRcl+zKgF++3FRLGjES+Ok7OejLlhoItAEDJPvzUp911RygGLjiG98mM7zTDAQ8xMkpwDJJPsqVwAbf8DMwWJLXxhDYJun2JZMX6gKhzSKsBDb57XXAG6XPhHKpXY8YPRA1pDWBJYjP5wNwVNNnQpnyftb/nW0Rtx37EMN2X5GPJX47vqzYjCaTouuwxCBgIzBFkdtkw29kn5Tv+X31wFBbEir6IDKdTS1QrdiukfpuJd2OlxPOdCaoI7cPuOu3XycJXgQ8w74a2q/x0RWYi1tR0446h+Ae8CBJEBOiDiL3gAMa+S/SVV4hdERkQzVIAzACGBNBrn+uCMzQOG8lvMXe1ehMjnLoOjTzNLJNiJ0uwCGNzmCNLBGeEv5nJ8hONGWIO0NZb3MugvdTnDYS3mxkqFnyCQ63JlGYrzg9Y9CtIlySe8DqtAT2Kg73xOgfV/S/kPLCQj0HbIjRryF7FOJsIjGM7K13oYXdScXmZlIC6xVHf4k47SqYrtg143CRLeO+4uiApV0R2Z+uc1asURw0OToJCtrgmeZKQF39rp/TCMV+hYtxD8Q/DozvkOx29YHkY7vcEbcXLEWcB/GNVxJ9QW2CnLTiSvl29AY+kWGuluQumCv5eSd3FCG2z87AS0R+b0Hk+AlkqtY/iLOhfChxwRDglfQ+FKkeHE94nnWPbot1wUTF3ypVYSrw3UBgXEoChxV/V3VKlYh677mifFunbIkSxAFVV0UZM+l04AIi/89KELg3sAX4qAnuAV8RJ65YJKrbEXPchJjWa8BaxFrrT+azBuAflLHCxD90yLQAAAAASUVORK5CYII=`,
    `iVBORw0KGgoAAAANSUhEUgAAACAAAAA7CAYAAAAaa4isAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQWSURBVFiFrdnba11FFAbwX5PUeqVFMVIritRepFHQar1fKIgFqVh9KIgvfRDBy4Ma/QsUqQUpFlF8sIqCFyo+KQjipepLtSqBFrVe2lI1aqhaY2oSk+PD7NPu7MzZe8/Z+WA458ysWes7s9das2Y23KoaK/EqfsG/2I+XsLTG3Ep8UDHeiz1oRdo+9DQl8CnOKRnf2MF4uy1vYrwHQ7i6RKbqEZ3SlMDnuKbD+Am4rELHRBMCMIDPOozdr3z5W+bAEXswIr6UJ+FQBYELmhqfxle4PDJ+FG9U6FjWhEBv9rkCi/FxROYTnJ/J9EbG+7CjCQlYj7crZOYLq1F8BNO4oymBfhxWnVSejBBo4W9hhRrhB6yqkPmoA4GWEM59TQi8hrtLxlcIy10WEYNNCDyE7SXjT1cYb2EU53ZL4Fp822HstEx5FYEWXumWwMlCWu2PjN1c03g7KlbXNZr3+jFh272qQq4K8/BoNwRgl/jG9FMCAbhdTV+oS2A4kUAf7kucAy4SSq4TC/2L1feBdhvBglQCvUJWu77Qv7mGwWG8VejbkEoAPsSz2fczxfN/rL2Pmwp9j1cZi6XO73AXprLPhTWJD2Nvoa/SEWMEluNUM53oACaVFx8LhbJ9QijlZHOS0Gd2vn8xU1hVHR8SfGh/rm9zlcFiGP7neMhN4R5syv5VlUcvwTqM5/qGqgjEsMXxf5THLaodcafgB+3fA90Q6MPzQjjmcUkNAvl2VIP6YFWm5Oxc33mJBGotf6dNZi9+M/NQcmFt+gF/NSHQEhLSmlxfalYbbUJARuCK7HsvbkskMDYXBNZkMteJFypl+DVRfhbmCZltANukOeCkUOI1xg4hGR1MMH5AuFGZEzyCPxKMt4QtuTaqar1dWJREOSSgOSOwW9gTUpC0A1YRGBWeaQxfmLnxtJFUhtUpt4v1IXyNG/BmZCw1XEvRb7aTjQsbEyFEJwrjYzhrrgisjRB4rCDzVERmCJfOBYF1EeXFe4DTxUN1Ci8LJX3XWBZRvDEiNxiRa7cfpYfyMcwXwiqv8J2IXB9eKCGxpVsC8H1B2aiwT8Rwr9lO2XbMJd0SeDeisOyssBZHInOe65bAMxFlsdyQx2r8XpgzKX4XWYkHIwTqJLCLhZogP2+P+ietY1hfUBJLv2UkRgrzd+KMFAIrCwqOpEwWHkcxTxyUULDMN9OzRxIJwI1mR8ek8mvBGfgmN/HnLggQipuiLx2ue/mU35K7fUHxXqRvW93Ju818ft1gQ07HNB6uM2mRcDwvbjLdvCfamtPxRB3Dg8JRPZbbr0w0vlQ46rXwpeDYUWwSDiTjHQy32wMJxl93/NJjn8I7puKmsh13Zv2jQqiMCo73D/4U7pO36nyvXMQC4Y3LhHB7Mp0f/B8DAup30vFZVwAAAABJRU5ErkJggg==`,
    `iVBORw0KGgoAAAANSUhEUgAAAB4AAAA4CAYAAADqxUiJAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOPSURBVFiFtZldaI9RHMc/G7aZ2czsxUsy72VhNVy4WaaQzA2GFUpulJe4UkpcKBdaREgtFy5ISS6WTC1lXvKSlJcxEUbehhUWm8fFeZ52nvM////z+/+fs2+d2v+c3+/3OS/P+T3nPAO7CoFDwDugG7gAVCaxdaYS4B7gGaUbmDOY4AsWaFA6gBGDAa1NAQ3KjsEArxKAXwNDXYOrBWAPWO8aPFUI/giMdQmeKAR7wCPUDnCikWmAPeABUOwKfs0P+hc1qq4I+B1UwomtXKAKyPd/56H2byr4DaDABdzUxQiwB7RpnXWmFwKwB7QCw11By4B/QrAHtKCWK7Yk2cwsl4jIbtkC8JgMOrsSOJqBX0grSH/EQdkUB1wE/BFAbgPPjLoeYqbWqwLwWiAL2Er4YTwSB7xdAD6g2Z/X6ruBHDOg5OECNYVRWqL9fUX7uxiYnSl4hsCmhoEd0Ar0a21zhZyQGoCfyJ7iRs2vRas/lg5wOnBZCAzKWc1fTzxXzeBZqIWvB6b4dTnAAmApMCSdngJfgXLUNOcC74HRwEvU6SakNsFIvgOfhaNeqMU+7tf9wZJCf1icO4CTwDpgkm9XCPwWgHdqsedr9QkPWJPW2A/UmQaargvAJwyfx379aVvAbQxMSaqbwhkBuNnw2a0NapEtaLAem1OAbwnABwyfQtRD5gEfgAozaD7wCnV4s6nM73UUuMHiu1zz7UAdIkNq9BurLc4bBVAPtRVt2gD0+jbtZmM2asRNFkc98acqCVOpaSKwBRifrNG8EWaj3jJR0F+opORMMwVQD3guDSh9O80T2nW5BlcJ7Z64Bk8T2iXbihnrIeG17CVxffuAUtfg1wZklwV83zUUVKrTIYXAJ6PubjoBpWv81vhdjLpH66oB9qQRU6RzhEe3F1iNfS9fweFaHzSCv0Mdi24mgT/F0V05eHnopQQY50Ns8Fg3iECTLIGL/LYS7CPvQ617bL01AutTmQ+cssA7UafMWGo2guZZbOpJ3GbtwKg44Doj4LAkdhWoJ9t8ay3LFFxpBEv1bSsLOEzimmf0SarWCBR1EctCneEC+y9oyUWaZXKBfUbd5Agfj/BR+QTqwi7WLOwH+d0RfjmEvwyE/qeR7JNQObAYdeOrxz4zEyLApQycv3pQ0x4JngesQSWJh6jtMAI15cHW+JYCWkD4DtUZ0UmxRmHfx4H2ozrWA7xBHehD+g+LlAsPkEITOgAAAABJRU5ErkJggg==`,
    `iVBORw0KGgoAAAANSUhEUgAAABoAAAAzCAYAAACJ6RgwAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKhSURBVFiFrdhNaF1VEMDxn00wUVJSG4MkbgKNpd3FLkSNuAiCiiChC+k2iBALrttSELpQ3JeuxI1EslAxooLgRkqFQARXalpobP2ISiBGQ1JCkqaL815zc3Of7815GRjeuedj/u9ezsycOeyVZzCNJaxhBo87QDmKKdzFTknn8MBBQLowXwEo6isHATqMjSagRUzgwXZhN5uA6vo7LuKxHMhEi5CiruE96Wu0LD9mgOr6C55tFbTeBmgHdzDeCmimsOg3fIbP8W8Q9lwzUA9ewHCpvx/fB2B/SP6YJcexFYB9mAuCbwKgbTyZC5oMgHbwdS7oEawEYWO5sPNB0GwuqBu3grDsQPx2EJSdXo5IUTwCezXvnbgQBP2ETjgUBEXT+km8GVyD5pm4SpfQ2xGADOLdjD/3MDYjn65pdP4fGY+AhtoADUVA2SkAixFQXxugjyOgR2u/2/g7sG4bH+SApvBDYN2MFCdblp8lv3gaC1r3o9EIBJals/mZAOS7KOShgPGivhQFHcuAfBGFwEAQsqoNB58NgCZzIfBVydgW3rC/eFtRy0G5crlkcA0d+Nb+N3q5HdDrFQZH8JTk/cX+dTyfCxqtANWz55WKsRWcyAH1VRibro314s+K8S9zQLBZMrRQGKs6Om9KGTYsyyVDi4WxTlyvgI0QPwWtlp7nCu0tvFOxpicHtFF6LoeZadw+CFD5nqFcomxKO7AovTmgrkL7hnTvUJaPJL+qS38OqHivMN9gzqK01evyYpBh0N7d9H6DeQNSlV6ft40nWn2jQ7hU6qsKnMPSBukurT3bCuQUrtnvH8U0PYZP7Xfo+/7WqFDqx2m8pnE9+p9UM52TYt6aFN/+qbW77EaFhqXmW7gqefpfdq9xlmv6Kz4RqOjuAYJjwYf7u3ykAAAAAElFTkSuQmCC`,
    `iVBORw0KGgoAAAANSUhEUgAAACYAAAAlCAYAAAAuqZsAAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM2SURBVFiFxZhJaBRBFIa/ZKIJmrihRJSgESJ4EA+uuOYkiCJERFAPKgbFi3ryKHrwJuSgJ3NQcDkExQVXUFDEGAUjJIooIaCJRoIkMa5ZZsbD63K6a6qqe8Ye80PRXfW6q76u5dWrhowWAheBbmAI6ALOAUsZQ60AvgNpQ0oCZ4DpYwF2wwLlTwPACaDyf4I9iwCm0hBwGdgAFBcarC0HMH/6ABwDqgoBVZcnlD+NItNhXZxgt2IA86cHwOo4wL7EDKbSdWDev4ANahUOAW9jgvsFHAfK8gE75FUwAJxGvvJgTGAqvQTm5wNXpOV3xwyWRkamLiqQ8kNprbwkagU5qAK4griXvLWfwiwIlRqBcS4AW884X4pB9cho7bU9YNtSyguCE9QeoMZmtIFVFIYloCKg1ma0gU0qCEq2JtoMNrCpOVTeTfaqjqqUzWCb/FGjhRSwAPHsy4BFwCxgDhIRzw15/0XEdv6qk2znaFv6tg27GDjveO83OW5VJcCIVskSoN/SwDZHXWscYDddEKY5VkVwiH8CrcBVSx39rgYc+ugymsCqtXw7MpfuWur47Kjf5XbqgQYsztwENkPLP/KuDy0N9Dgan+ywFQOHgfsY3JMJTP9KNYS9ZPfODyTQtCnK1rYWCSoDC8EE5t+OOpATlFKb9uz7kEZHDGV9hrJa5LCdiAp2jaDzbM0RbNhQ1gDsREbAry3AKbzYMAzstmZr1vJdIWBfDWUJ4BLimBsJev8DwAWg1AWWAp5qticEe9A1v2xg6mP6gH3AKiT0VtoBNJnASr1rN+Kd/eoDXml5l0yu5LWWb0HOGH7VuMA6LY35/VkyBOwTwXmWMoCBDKFSJ7DJBDbeu36zNHbHdz8tBCxJ0M/1In+V/NoMbPfu25GhNXZKE5kDq0kJZDWmgcchYEXI1qP2x1EyIzIb+Qsw7NneATPVi6YeG/Su1ZjDoiRy/gRYiYQ5uhYDuxDf5LcnyJwvJyC/tDqAk8gPQtf2xhHvC3qwRw7lyMJIA1s121ncJ6T1rsaV9IOuUgX2OabUAiwH7gFHgedeeRnioyqRPXCKV54E3iAuKN+IN5I2IpO5GRmWWPUHXpJtdrpBRkEAAAAASUVORK5CYII=`
  ];

  constructor(public ctx: CanvasRenderingContext2D) {
    this.img = new Image();
    this.img.src = this.base64 + this.imgs[1];
    this.pos = {x: 700, y: 410};
    this.basePos = Object.assign({}, this.pos);
    this.shit = new Shit(ctx);
  }

  move(direction: string) {
    if (direction === 'left') {
      this.moving = 1;
      this.vx = 6;
      this.shit.move(6);
    }
    this.cur = this.cur < 5 ? this.cur+1 : 1;
    this.img.src = this.base64 + this.imgs[this.cur];
    this.pos.y = this.basePos.y + (this.cur*4);
    console.log(this.img);
  }

  draw() {
    this.pos.x -= (this.moving-- > 0) && this.vx;
    this.ctx.drawImage(this.img, this.pos.x, this.pos.y);
    this.shit.draw();
  }
}
